<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index, noimageindex, noarchive">
    <meta name="description"
        content="Taistelukenttä d20 -pelin pikaopas pelaajalle. Sisältää vuoron vaiheet, komentopistetoiminnot ja suodattimen omien yksiköiden tietojen nopeaan tarkasteluun.">
    <meta name="keywords" lang="fi"
        content="pikaopas, pelaajan opas, Taistelukenttä d20, komentopisteet, KP, yksiköt, säännöt, nopea viite, sotapeli, d20 system, D&D, Dungeons and Dragons, noppapeli, suomalainen, ilmaiset säännöt, taktiset säännöt">
    <meta name="keywords" lang="en"
        content="quick reference, player guide, Taistelukenttä d20, command points, units, rules, wargame, d20 system, D&D, Dungeons and Dragons, dice game, Finnish, free rules, tactical rules">
    <title>Taistelukenttä d20 - Pelaajan Pikaopas</title>
    <link rel="icon" type="image/x-icon" href="images/tkd20ikoni.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Black+Ops+One&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="Styles/rules.css">
    <style>
        /* Lisätyylit pikaopasta varten */
        .unit-filter-container {
            background-color: #f5f5f4;
            padding: 1rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            border: 1px solid #e7e5e4;
        }

        .unit-checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .unit-checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 0.5rem 1rem;
            background-color: white;
            border-radius: 9999px;
            border: 1px solid #d6d3d1;
            transition: all 0.2s ease;
            user-select: none;
        }

        .unit-checkbox-label:hover {
            background-color: #f5e8c7;
        }

        .unit-checkbox-label input {
            margin-right: 0.5rem;
        }

        .unit-checkbox-label input:checked+span {
            font-weight: bold;
            color: #556B2F;
        }
    </style>
</head>

<body class="text-stone-900">
    <header id="main-navbar">
        <div class="container mx-auto flex items-center">
            <div class="header-left-spacer md:hidden"></div>

            <div id="navbar-dropdown-container" class="relative">
                <a href="#" id="current-page-name" class="home-link">Pelaajan Pikaopas</a>
                <nav id="main-navbar-content">
                    <ul class="top-nav-list">
                        <li><a href="index.html" class="nav-link-top">Etusivu</a></li>
                        <li><a href="ydinsaannot.html" class="nav-link-top">Ydinsäännöt</a></li>
                        <li><a href="taktisen-tason-taistelu.html" class="nav-link-top">Taktinen taistelu</a></li>
                        <li><a href="pelaajan-pikaopas.html" class="nav-link-top" style="color:#C2B280;">Pelaajan
                                Pikaopas</a></li>
                        <li><a href="siniset-yksiköt.html" class="nav-link-top">Siniset yksiköt</a></li>
                        <li><a href="punaiset-yksiköt.html" class="nav-link-top">Punaiset yksiköt</a></li>
                        <li><a href="kampanjan-hallinta.html" class="nav-link-top">Kampanjan hallinta</a></li>
                        <li><a href="skenaariot.html" class="nav-link-top">Skenaariot</a></li>
                        <li><a href="pelinjohtajan-opas.html" class="nav-link-top">Pelinjohtajan opas</a></li>
                        <li><a href="sanasto-ja-ukk.html" class="nav-link-top">Sanasto ja UKK</a></li>
                        <li><a href="tietoja.html" class="nav-link-top">Tietoa & Muutoshistoria</a></li>
                    </ul>
                </nav>
            </div>
            <div class="header-right-spacer md:hidden"></div>
        </div>
    </header>
    <div id="sidebar"
        class="fixed top-0 left-0 h-full w-64 bg-white shadow-lg z-20 p-4 overflow-y-auto sidebar-hidden md:sidebar-visible md:translate-x-0">
        <h1 class="sidebar-title">Sisällysluettelo</h1>
        <nav id="nav-menu" class="space-y-1"></nav>
    </div>

    <button id="menu-toggle" class="md:hidden fixed top-4 left-4 z-55 p-2 bg-white rounded-md shadow-md">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>

    <main id="main-content" class="md:ml-64 p-4 md:p-8">
        <div class="prose max-w-none">

            <div class="relative h-96 w-full bg-cover bg-center mb-8"
                style="background-image: url('images/bannertkd.jpg');">
                <div class="relative z-10 flex h-full items-center justify-center">
                    <h1 class="banner-title text-4xl md:text-6xl text-center">
                        Taistelukenttä d20 – Pelaajan Pikaopas <br> v. Alpha
                    </h1>
                </div>
            </div>

            <section id="pikaohjeet">
                <h2>Pelivuoron Vaiheet</h2>
                <ol>
                    <li><strong>Liikevaihe:</strong> Yksiköt suorittavat ennalta määrätyt liikkeensä.</li>
                    <li><strong>Tiedusteluvaihe:</strong> Tiedustelutoiminnot ja havaintoheitot tehdään.</li>
                    <li><strong>Komentovaihe:</strong> Pelaajat käyttävät Komentopisteensä (<span class="glossary-term"
                            data-term="kp">KP</span>) ja antavat kaikki käskyt
                        (tuli, erikoistoiminnot) samanaikaisesti.</li>
                    <li><strong>Tulitoimintavaihe:</strong> Kaikki Komentovaiheessa annetut tulikomennot ja iskut
                        ratkaistaan.</li>
                    <li><strong>Tilannevaihe:</strong> Moraalitestit suoritetaan, tilavaikutukset päivitetään ja vuoro
                        päättyy.</li>
                </ol>

                <h2 style="margin-top: 2em;">Taistelun Perusteet</h2>
                <ul>
                    <li><strong>Hyökkäysheitto:</strong>
                        <code>d20 + <span class="glossary-term" data-term="taitotaso">Taitotaso</span> (<span class="glossary-term" data-term="taitotaso">TT</span>) + bonukset</code>
                        vs. Vihollisen
                        <code><span class="glossary-term" data-term="suoja">Suoja</span> (<span class="glossary-term" data-term="suoja">S</span>)</code>.
                        Tulos pitää olla <strong>vähintään yhtä suuri</strong> kuin <span class="glossary-term"
                            data-term="suoja">Suoja</span>-arvo.
                    </li>
                    <li><strong><span class="glossary-term" data-term="etu ja haitta">Etu</span> (Advantage):</strong>
                        Heitä 2 x d20, käytä parempi tulos. Saadaan esim. hyökätessä
                        sivustaan/selustaan tai lamautunutta kohdetta vastaan.</li>
                    <li><strong><span class="glossary-term" data-term="etu ja haitta">Haitta</span>
                            (Disadvantage):</strong> Heitä 2 x d20, käytä huonompi tulos. Tulee esim.
                        ammuttaessa linnoittautunutta kohdetta tai huonossa näkyvyydessä.</li>
                    <li><strong>Vahinko:</strong> Onnistunut osuma aiheuttaa vahinkoa aseen <strong><span
                                class="glossary-term" data-term="tuli-isku">Tuli-isku</span>
                            (TI)</strong> -nopan verran.</li>
                    <li><strong>Tilaisuusisku:</strong> Jos vihollinen poistuu Hallintavyöhykkeeltäsi (2 cm säde) ilman
                        <i>Irtautuminen</i>-komentoa, saat tehdä sitä vastaan yhden ilmaisen hyökkäyksen.
                    </li>
                </ul>

                <h2 style="margin-top: 2em;">Moraalitestit</h2>
                <p>Heitto:
                    <code>d20 + <span class="glossary-term" data-term="moraali">Moraali</span> (<span class="glossary-term" data-term="moraali">M</span>)</code>
                    vs. Vaikeusaste (<span class="glossary-term" data-term="dc">DC</span>). Epäonnistuminen johtaa
                    <strong>Lamautunut</strong>-tilaan, kriittinen epäonnistuminen (5 alle <span class="glossary-term"
                        data-term="dc">DC</span>:n)
                    <strong>Vetäytyy</strong>-tilaan.
                </p>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Tilanne</th>
                                <th>Vaikeusaste (<span class="glossary-term" data-term="dc">DC</span>)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Kärsii vahinkoa ensimmäistä kertaa</td>
                                <td>10</td>
                            </tr>
                            <tr>
                                <td><span class="glossary-term" data-term="taistelukunto">TK</span> putoaa alle 50%</td>
                                <td>12</td>
                            </tr>
                            <tr>
                                <td>Joutuu epäsuoran tulen alle</td>
                                <td>13</td>
                            </tr>
                            <tr>
                                <td>Vieressä oleva oma yksikkö tuhoutuu/vetäytyy</td>
                                <td>12</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h2 style="margin-top: 2em;">Tärkeimmät <span class="glossary-term"
                        data-term="tilaefektit">Tilaefektit</span></h2>
                <ul>
                    <li><strong>Vaurioitunut:</strong> <span class="glossary-term" data-term="taistelukunto">TK</span>
                        alle 50%. <span class="glossary-term" data-term="liike">Liike</span> ja <span
                            class="glossary-term" data-term="tuli-isku">Tuli-isku</span> puolitettu.</li>
                    <li><strong>Lamautunut:</strong> Ei voi liikkua tai käyttää toimintoja. Vastaan tehdyt hyökkäykset
                        saavat <span class="glossary-term" data-term="etu ja haitta">Edun</span>. Poistuu onnistuneella
                        moraalitestillä tai <i>Moraalin Kohotus</i> -komennolla.</li>
                    <li><strong>Vetäytyy:</strong> Pakenee hallitsemattomasti. Poistuu <i>Moraalin Kohotus</i>
                        -komennolla.</li>
                    <li><strong><span class="glossary-term" data-term="piiloutunut">Piiloutunut</span>:</strong> Ei voi
                        ottaa kohteeksi, ellei vihollinen ole 5 cm tai lähempänä.
                        Tilaan pääsee vain erikoiskyvyllä.</li>
                </ul>

                <h2 style="margin-top: 2em;">Komppanian&shy;päällikön Rooli</h2>
                <p>Komppanianpäällikkönä (<span class="glossary-term" data-term="kp">KP</span>) olet koko komppanian
                    strateginen aivot ja johtaja. Sinun päätöksesi
                    muovaavat taistelun kulkua ja vaikuttavat suoraan muiden pelaajien (joukkueenjohtajien)
                    onnistumiseen. Et ole vain yksi komentaja muiden joukossa – olet voimankerrain, joka ohjaa koko
                    koneistoa.</p>

                <h3>Päätehtävät ja vastuut</h3>
                <ul>
                    <li><strong>Strateginen johtaminen:</strong> Sinä näet taistelukentän kokonaiskuvan. Määrität
                        komppanian päätavoitteet, päätät missä ja milloin puolustetaan, hyökätään tai vetäydytään.
                        Vastuullasi on sijoittaa joukkueet (A, B, C, D) kartalle siten, että ne tukevat toisiaan ja
                        yleistä suunnitelmaa.</li>
                    <li><strong><span class="glossary-term" data-term="kp">Komentopisteiden</span> (<span
                                class="glossary-term" data-term="kp">KP</span>)
                            hallinta:</strong> Saat joka vuoro suurimman määrän
                        <span class="glossary-term" data-term="kp">komentopisteitä</span>. Yksi tärkeimmistä
                        tehtävistäsi on jakaa näitä pisteitä joukkueenjohtajille
                        sinne, missä niitä eniten tarvitaan. Voit siirtää <span class="glossary-term"
                            data-term="kp">KP</span>:tä yhdelle johtajalle vahvistaaksesi hänen
                        kykyään toimia tai pitää ne itselläsi käyttääksesi komppanian tason käskyjä.
                    </li>
                    <li><strong>Komppanian erikoiskäskyjen antaminen:</strong> Sinulla on pääsy uniikkeihin ja
                        voimakkaisiin käskyihin, joita joukkueenjohtajat eivät voi antaa. Nämä käskyt maksavat <span
                            class="glossary-term" data-term="kp">KP</span>:tä,
                        mutta voivat muuttaa taistelun suunnan, kuten <i>Vahvistettu maali</i> tai <i>Järjestäytynyt
                            vetäytyminen</i>.</li>
                    <li><strong>Tukivarojen käyttö:</strong> Hallinnoit komppanian "epäorgaanisia" tukielementtejä. Tämä
                        tarkoittaa tyypillisesti kaikkein voimakkaimpia aseita, kuten pataljoonan raskasta tykistöä
                        (esim. 155mm kenttätykistö). Muista, että näiden kutsumisessa on usein viive ja niiden
                        käyttömäärä on rajallinen.</li>
                </ul>

                <h3>Vinkkejä menestykseen komppanian&shy;päällikkönä</h3>
                <ul>
                    <li><strong>Kommunikoi:</strong> Jatkuva ja selkeä viestintä joukkueenjohtajien kanssa on
                        elintärkeää. Kuuntele heidän raporttejaan ja tue heitä resursseillasi.</li>
                    <li><strong>Ennakoi:</strong> Yritä ennakoida, mitä vihollinen tekee seuraavaksi, ja valmistele
                        vastatoimet etukäteen. Hyvä tykistökeskitys ennakoidulle etenemisreitille on tuhoisampi kuin
                        reaktiivinen isku.</li>
                    <li><strong>Tunne joukkosi:</strong> Tiedä, mikä joukkue on varustettu parhaiten panssarintorjuntaan
                        (<span class="glossary-term" data-term="pst">PST</span>) ja mikä tulitukeen (<span
                            class="glossary-term" data-term="krh">KRH</span>, <span class="glossary-term"
                            data-term="tr">TR</span>). Ohjaa tehtävät oikeille joukkueille.</li>
                </ul>

                <h3 style="margin-top: 2em;">Komppanian&shy;päällikön Taktiset Erikoiskyvyt</h3>
                <p>
                    Nämä ovat voimakkaita käskyjä, joita vain Komppanianpäällikkö voi käyttää omasta <span
                        class="glossary-term" data-term="kp">KP</span>-poolistaan. Muista, että voit käyttää vain
                    <strong>yhden</strong> näistä taktisista kyvyistä (Motti, Painopiste, Sitova, Vetäytyminen) per
                    vuoro.
                </p>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Toiminto</th>
                                <th>Hinta (<span class="glossary-term" data-term="kp">KP</span>)</th>
                                <th>Kuvaus</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Tulitukipyyntö (Epäorgaaninen)</strong></td>
                                <td>3 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Kutsu pelilaudan ulkopuolista tulitukea (esim. 155mm tykistö).</td>
                            </tr>
                            <tr>
                                <td><strong>Mottitaktiikka</strong></td>
                                <td>5 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>(Kerran/taistelu) Valitse 10 cm säde. Viholliset tekevät <span class="glossary-term"
                                        data-term="moraali">Moraalitestin</span> (<span class="glossary-term"
                                        data-term="dc">DC</span> 15) tai vetäytyvät.</td>
                            </tr>
                            <tr>
                                <td><strong>Painopisteen Muodostaminen</strong></td>
                                <td>3 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Yksi joukkue saa +5 cm lisää liikkumista hyökätessään.</td>
                            </tr>
                            <tr>
                                <td><strong>Sitova Tuli</strong></td>
                                <td>2 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Yhden joukkueen onnistuneet iskut antavat kohteelle -1 sen seuraavaan <span
                                        class="glossary-term" data-term="moraali">Moraalitestiin</span>.</td>
                            </tr>
                            <tr>
                                <td><strong>Järjestäytynyt Vetäytyminen</strong></td>
                                <td>3 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Valitse enintään 3 yksikköä, jotka voivat vetäytyä ja ampua samalla vuorolla.</td>
                            </tr>
                            <tr>
                                <td><strong>Vahvistettu Maali</strong></td>
                                <td>1 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Jos kaksi omaa yksikköä näkee saman vihollisen, seuraava hyökkäys sitä vastaan saa
                                    +2 bonuksen.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h2 style="margin-top: 2em;">Yleisimmät <span class="glossary-term"
                        data-term="kp">Komentopiste</span>&shy;toiminnot (<span class="glossary-term"
                        data-term="kp">KP</span>)</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Toiminto</th>
                                <th>Hinta (<span class="glossary-term" data-term="kp">KP</span>)</th>
                                <th>Lyhyt Kuvaus</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Hyökkäyskäsky</strong></td>
                                <td>1 <span class="glossary-term" data-term="kp">KP</span> / ryhmä</td>
                                <td>Käske ryhmää aktiivisesti hyökkäämään tai rynnäköimään.</td>
                            </tr>
                            <tr>
                                <td><strong>Tulen Keskittäminen</strong></td>
                                <td>1 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Yksi tai useampi ryhmäsi saa +1 bonuksen hyökkäysheittoonsa samaa maalia vastaan.
                                </td>
                            </tr>
                            <tr>
                                <td><strong>Irtautuminen</strong></td>
                                <td>2 <span class="glossary-term" data-term="kp">KP</span> / ryhmä</td>
                                <td>Vetäydy hallitusti vihollisen lähitaistelusta (ZoC) ilman tilaisuusiskua.</td>
                            </tr>
                            <tr>
                                <td><strong>Moraalin Kohotus</strong></td>
                                <td>2 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Poista "Lamautunut" tai "Vetäytyy"-tila yhdeltä omalta yksiköltä.</td>
                            </tr>
                            <tr>
                                <td><strong>Tulitukipyyntö (orgaaninen)</strong></td>
                                <td>1 <span class="glossary-term" data-term="kp">KP</span></td>
                                <td>Pyydä tulta omalta kranaatinheitinryhmältäsi. Vaatii tulenjohtajan.</td>
                            </tr>
                            <tr>
                                <td><strong>Tiedustelutoiminta</strong></td>
                                <td>1 <span class="glossary-term" data-term="kp">KP</span> / ryhmä</td>
                                <td>Käske ryhmää suorittamaan aktiivinen tiedusteluheitto nimeämäänsä kohti tai aluetta
                                    kohti.</td>
                            </tr>
                            <tr>
                                <td><strong>Valmius (Overwatch)</strong></td>
                                <td>1 <span class="glossary-term" data-term="kp">KP</span> / ryhmä</td>
                                <td>
                                    Aseta yksi yksikkö valmiustilaan. Käsky annetaan Komentovaiheessa. Jos
                                    vihollisyksikkö myöhemmin (mutta kuitenkin ennen seuraavan vuoron komentovaihetta)
                                    liikkuu tämän yksikön näköyhteyteen,
                                    valmiudessa oleva yksikkö saa välittömästi tehdä sitä vastaan hyökkäyksen. Tämä
                                    kuluttaa yksikön normaalin tulitoiminnon kyseiseltä vuorolta. Valmiushyökkäyksen
                                    tulos selvitetään
                                    heti, kun sen ehdot täyttyvät eikä vasta tulitoimintavaiheen aikana.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <h2 style="margin-top: 2em;">Maaston Vaikutukset Pelaajalle</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Maastotyyppi</th>
                                <th>Liikevaikutus</th>
                                <th><span class="glossary-term" data-term="suoja">Suojabonus</span> (<span
                                        class="glossary-term" data-term="suoja">S</span>)</th>
                                <th>Näkyvyys</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Tie</strong></td>
                                <td>+50% <span class="glossary-term" data-term="liike">liike</span></td>
                                <td>+0</td>
                                <td>Ei estä</td>
                            </tr>
                            <tr>
                                <td><strong>Pelto</strong></td>
                                <td>Normaali</td>
                                <td>+1</td>
                                <td>Ei estä</td>
                            </tr>
                            <tr>
                                <td><strong>Metsä</strong></td>
                                <td>-50% <span class="glossary-term" data-term="liike">liike</span></td>
                                <td>+4</td>
                                <td>Estää <span class="glossary-term" data-term="los">näköyhteyden</span></td>
                            </tr>
                            <tr>
                                <td><strong>Tiheä metsä</strong></td>
                                <td>-75% <span class="glossary-term" data-term="liike">liike</span></td>
                                <td>+6</td>
                                <td>Estää <span class="glossary-term" data-term="los">näköyhteyden</span></td>
                            </tr>
                            <tr>
                                <td><strong>Rakennus/Asema</strong></td>
                                <td>Ei voi liikkua läpi</td>
                                <td>+6</td>
                                <td>Estää <span class="glossary-term" data-term="los">näköyhteyden</span></td>
                            </tr>
                            <tr>
                                <td><strong>Korkea maasto</strong></td>
                                <td>-</td>
                                <td colspan="2">Saa +2 bonuksen hyökkäys- ja tiedusteluheittoihin alempana olevaa
                                    kohdetta vastaan.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <h3 style="margin-top: 2em;">Etäisyysmuunnin</h3>
                <div class="unit-filter-container">
                    <p style="margin-bottom: 1rem;">Syötä etäisyys senttimetreinä (cm) nähdäksesi sen vastineen metreinä
                        ja esimerkkejä aseiden kantamista (mittakaava 1cm = 100m).</p>
                    <div style="display: flex; align-items: center; gap: 1rem;">
                        <input type="number" id="distance-input" placeholder="Etäisyys (cm)"
                            style="padding: 0.5rem; border-radius: 0.25rem; border: 1px solid #d6d3d1;">
                        <button id="calculate-distance"
                            style="padding: 0.5rem 1rem; background-color: #556B2F; color: white; border-radius: 0.25rem; cursor: pointer;">Laske</button>
                    </div>
                    <div id="distance-output" style="margin-top: 1rem; font-weight: bold;"></div>
                </div>

                <h3 style="margin-top: 2em;">Liikkumisen Kustannuslaskuri</h3>
                <div class="unit-filter-container">
                    <p style="margin-bottom: 1.5rem;">
                        Syötä yksikkösi <span class="glossary-term" data-term="liike">Liike</span>-arvo ja suunniteltu
                        matka eri maastotyypeissä. Laskuri kertoo, riittääkö
                        liikkumispotentiaalisi reitin kulkemiseen. <strong>Huom:</strong> Syötä vain kokonaislukuja
                        (kuten "1" tai "5").
                    </p>
                    <div id="liike-laskuri"
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1.5rem;">

                        <div>
                            <label for="liike-arvo"
                                style="font-weight: bold; display: block; margin-bottom: 0.5rem;">Yksikön
                                <span class="glossary-term" data-term="liike">Liike</span>-arvo:</label>
                            <input type="number" id="liike-arvo" placeholder="Esim. 7"
                                style="width: 100%; padding: 0.5rem; border-radius: 0.25rem; border: 1px solid #d6d3d1;">
                        </div>

                        <div>
                            <p style="font-weight: bold; margin-bottom: 0.5rem;">Suunniteltu matka (cm):</p>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem;">
                                <label for="matka-tie">Tie:</label>
                                <input type="number" id="matka-tie" placeholder="0"
                                    style="padding: 0.5rem; border-radius: 0.25rem; border: 1px solid #d6d3d1;">

                                <label for="matka-pelto">Pelto/Aukea:</label>
                                <input type="number" id="matka-pelto" placeholder="0"
                                    style="padding: 0.5rem; border-radius: 0.25rem; border: 1px solid #d6d3d1;">

                                <label for="matka-metsa">Metsä/Suo:</label>
                                <input type="number" id="matka-metsa" placeholder="0"
                                    style="padding: 0.5rem; border-radius: 0.25rem; border: 1px solid #d6d3d1;">

                                <label for="matka-tihea-metsa">Tiheä metsä:</label>
                                <input type="number" id="matka-tihea-metsa" placeholder="0"
                                    style="padding: 0.5rem; border-radius: 0.25rem; border: 1px solid #d6d3d1;">
                            </div>
                        </div>
                    </div>
                    <button id="calculate-liike"
                        style="margin-top: 1.5rem; padding: 0.75rem 1.5rem; background-color: #556B2F; color: white; border-radius: 0.25rem; cursor: pointer; width: 100%;">Laske
                        Liikkumisen Kustannus</button>
                    <div id="liike-output"
                        style="margin-top: 1rem; padding: 1rem; background-color: #e7e5e4; border-radius: 0.25rem; min-height: 50px;">
                    </div>
                </div>
            </section>

            <section id="yksikkosuodatin">
                <h2>Valitse Omat Yksikkösi</h2>
                <div class="unit-filter-container">
                    <p style="margin-bottom: 1.5rem;">Valitse alla olevasta listasta ne yksiköt, jotka ovat mukanasi
                        tässä skenaariossa. Vain
                        valittujen yksiköiden tiedot näytetään alla.</p>
                    <div id="blue-unit-checkboxes" class="unit-checkbox-group">
                    </div>
                </div>

                <div id="unit-display-area">
                </div>
            </section>
        </div>
    </main>

    <div id="all-unit-data" style="display: none;">
        <div id="unit-jaakariryhma">
            <div class="unit-card">
                <h4>JÄÄKÄRIRYHMÄ</h4>
                <div class="unit-card-content">
                    <ul>
                        <li><strong>Tyyppi:</strong> Jalkaväki (10 sotilasta)</li>
                        <li><strong><span class="glossary-term" data-term="taistelukunto">TK</span>:</strong> 10</li>
                        <li><strong><span class="glossary-term" data-term="moraali">M</span>:</strong> +3</li>
                        <li><strong><span class="glossary-term" data-term="suoja">S</span>:</strong> 11</li>
                        <li><strong><span class="glossary-term" data-term="liike">Liike</span>:</strong> 7 cm</li>
                        <li><strong><span class="glossary-term" data-term="taitotaso">TT</span>:</strong> +3</li>
                        <li><strong>Kyvyt:</strong>
                            <ul>
                                <li><strong>Sisu:</strong> Kun yksikkö on "Vaurioitunut", sen <span
                                        class="glossary-term" data-term="moraali">Moraali</span> pysyy +3 (ei putoa
                                    +1).</li>
                                <li><strong>Maastoon Tottunut:</strong> Jättää huomiotta metsämaaston aiheuttaman
                                    <span class="glossary-term" data-term="liike">liikehidasteen</span>.
                                </li>
                                <li><strong>Tulenjohto (Passiivinen) <span
                                            class="vaurioitunut-tila">(Vaurioitunut)</span>:</strong> Voi johtaa
                                    orgaanista ja epäorgaanista tulta. Yksikön ollessa vaurioitunut, kyvyn käyttö vaatii
                                    onnistuneen d6-heiton (4+).</li>
                            </ul>
                        </li>
                        <li><strong>Varustus:</strong>
                            <ul>
                                <li><strong>Jalkaväkiaseistus:</strong> +3 (Hyökkäys), d6 (Vahinko)</li>
                                <li><strong>Tiedustelulennokki:</strong> +5 (Tiedustelu)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="unit-tukiryhma">
            <div class="unit-card">
                <h4>TUKIRYHMÄ (<span class="glossary-term" data-term="kk">KK</span>)</h4>
                <div class="unit-card-content">
                    <ul>
                        <li><strong>Tyyppi:</strong> Jalkaväki (Raskas konekivääri, 3 sotilasta)</li>
                        <li><strong><span class="glossary-term" data-term="taistelukunto">TK</span>:</strong> 8</li>
                        <li><strong><span class="glossary-term" data-term="moraali">M</span>:</strong> +2</li>
                        <li><strong><span class="glossary-term" data-term="suoja">S</span>:</strong> 10</li>
                        <li><strong><span class="glossary-term" data-term="liike">Liike</span>:</strong> 5 cm</li>
                        <li><strong><span class="glossary-term" data-term="taitotaso">TT</span>:</strong> +1</li>
                        <li><strong>Kyvyt:</strong>
                            <ul>
                                <li><strong>Lamauttava Tuli (2 <span class="glossary-term"
                                            data-term="kp">KP</span>):</strong> Valitse 5x1cm alue. Jokainen
                                    vihollisyksikkö valitulla alueella tekee välittömästi <span class="glossary-term"
                                        data-term="moraali">Moraalitestin</span> (<span class="glossary-term"
                                        data-term="dc">DC</span> 10). Tämä
                                    kyky ei aiheuta <span class="glossary-term"
                                        data-term="taistelukunto">TK</span>-vahinkoa.</li>
                                <li><strong>Tuliasema <span class="vaurioitunut-tila">(Vaurioitunut)</span>:</strong> +1
                                    Hyökkäykseen, jos pysyy paikallaan vuoron ajan. Yksikön ollessa vaurioitunut, kykyä
                                    ei voi käyttää.</li>
                            </ul>
                        </li>
                        <li><strong>Varustus:</strong>
                            <ul>
                                <li><strong>Konekivääri:</strong> +4 (Hyökkäys), d8 (Vahinko)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="unit-pst-ryhma">
            <div class="unit-card">
                <h4><span class="glossary-term" data-term="pst">PST</span>-RYHMÄ</h4>
                <div class="unit-card-content">
                    <ul>
                        <li><strong>Tyyppi:</strong> Jalkaväki (2 sotilasta + <span class="glossary-term"
                                data-term="pst">PST</span>-ase)</li>
                        <li><strong><span class="glossary-term" data-term="taistelukunto">TK</span>:</strong> 6</li>
                        <li><strong><span class="glossary-term" data-term="moraali">M</span>:</strong> +2</li>
                        <li><strong><span class="glossary-term" data-term="suoja">S</span>:</strong> 10</li>
                        <li><strong><span class="glossary-term" data-term="liike">Liike</span>:</strong> 5 cm</li>
                        <li><strong><span class="glossary-term" data-term="taitotaso">TT</span>:</strong> +1</li>
                        <li><strong>Kyvyt:</strong>
                            <ul>
                                <li><strong>Panssarintuhoaja:</strong> +2 Hyökkäykseen ajoneuvoja vastaan.</li>
                                <li><strong>Varustautuminen:</strong> <span class="glossary-term"
                                        data-term="pst">PST</span>-aseen voi ladata, mutta se kuluttaa koko
                                    vuoron, eikä ryhmä voi liikkua. Ei kuluta <span class="glossary-term"
                                        data-term="kp">Komentopisteitä</span>.</li>
                            </ul>
                        </li>
                        <li><strong>Varustus:</strong>
                            <ul>
                                <li><strong><span class="glossary-term" data-term="pst">PST</span>-ase:</strong> +2
                                    (Hyökkäys), 2d12 (<span class="glossary-term" data-term="pst">PST</span>-Vahinko).
                                </li>
                                <li><strong>Ammukset:</strong> 3 kpl</li>
                                <li><strong>Lämpökamera:</strong> +2 (Tiedustelu)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="unit-krh-ryhma">
            <div class="unit-card">
                <h4>KRANAATIN&shy;HEITIN&shy;RYHMÄ (81mm)</h4>
                <div class="unit-card-content">
                    <ul>
                        <li><strong>Tyyppi:</strong> Jalkaväki (Kevyt kranaatinheitin, 3 sotilasta)</li>
                        <li><strong><span class="glossary-term" data-term="taistelukunto">TK</span>:</strong> 8</li>
                        <li><strong><span class="glossary-term" data-term="moraali">M</span>:</strong> +2</li>
                        <li><strong><span class="glossary-term" data-term="suoja">S</span>:</strong> 9</li>
                        <li><strong><span class="glossary-term" data-term="liike">Liike</span>:</strong> 4 cm</li>
                        <li><strong><span class="glossary-term" data-term="taitotaso">TT</span>:</strong> +0</li>
                        <li><strong>Ammukset:</strong> 10</li>
                        <li><strong>Kyvyt:</strong>
                            <ul>
                                <li><strong><span class="glossary-term" data-term="orgaaninen tulituki">Orgaaninen
                                            Tulituki</span> (Epäsuora Tuli):</strong> Voi antaa epäsuoraa tulta.
                                    Vaatii onnistuneen tulenjohdon toiselta ystävälliseltä yksiköltä. Jokainen isku
                                    kuluttaa yhden ammuksen.</li>
                            </ul>
                        </li>
                        <li><strong>Varustus:</strong>
                            <ul>
                                <li><strong>81mm Kranaatinheitin:</strong> +1 (Hyökkäys), 2d6 (Vahinko, vaikutusalue 5cm
                                    säde)</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="unit-sissi-jaakarit">
            <div class="unit-card">
                <h4>SISSI-JÄÄKÄRIT</h4>
                <div class="unit-card-content">
                    <ul>
                        <li><strong>Tyyppi:</strong> Jalkaväki (Sissi, 7 sotilasta)</li>
                        <li><strong><span class="glossary-term" data-term="taistelukunto">TK</span>:</strong> 8</li>
                        <li><strong><span class="glossary-term" data-term="moraali">M</span>:</strong> +3</li>
                        <li><strong><span class="glossary-term" data-term="suoja">S</span>:</strong> 12</li>
                        <li><strong><span class="glossary-term" data-term="liike">Liike</span>:</strong> 9 cm</li>
                        <li><strong><span class="glossary-term" data-term="taitotaso">TT</span>:</strong> +4</li>
                        <li><strong>Kyvyt:</strong>
                            <ul>
                                <li><strong>Koukkaus :</strong> Hyökätessään vihollisen sivustaan tai selustaan, tämä
                                    yksikkö saa <span class="glossary-term" data-term="etu ja haitta">Edun</span>
                                    (Advantage) hyökkäysheittoonsa.</li>
                                <li><strong>Metsänpeitto (1 <span class="glossary-term"
                                            data-term="kp">KP</span>):</strong> Voi käyttää koko vuoronsa asettuakseen
                                    asemiin
                                    metsässä tai tiheässä suojassa, jolloin se muuttuu "<span class="glossary-term"
                                        data-term="piiloutunut">Piiloutunut</span>"-tilaan.</li>
                                <li><strong>Murtosulute (2 <span class="glossary-term"
                                            data-term="kp">KP</span>):</strong> Voi käyttää koko vuoronsa asettaakseen
                                    5cm
                                    leveän miinakentän.</li>
                            </ul>
                        </li>
                        <li><strong>Varustus:</strong>
                            <ul>
                                <li><strong>Jääkäriaseistus:</strong> +3 (Hyökkäys), d6 (Vahinko)</li>
                                <li><strong>Konekivääri:</strong> +4 (Hyökkäys), d8 (Vahinko)</li>
                                <li><strong>Kevyt <span class="glossary-term" data-term="pst">PST</span>-ase:</strong>
                                    +2 (Hyökkäys), 2d12 (<span class="glossary-term"
                                        data-term="pst">PST</span>-Vahinko). Ammukset: 1 kpl.
                                </li>
                                <li><strong>Tarkkuuskivääri:</strong> +5 (Hyökkäys), d10 (Vahinko). Osuessaan hyökkääjä
                                    voi valita kohteen aktiivisen erikoiskyvyn pois käytöstä yhden vuoron ajaksi.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="unit-erikoisjaakari-osasto">
            <div class="unit-card">
                <h4>ERIKOIS&shy;JÄÄKÄRI-OSASTO</h4>
                <div class="unit-card-content">
                    <ul>
                        <li><strong>Tyyppi:</strong> Jalkaväki (Erikoisjoukko, 5 sotilasta)</li>
                        <li><strong><span class="glossary-term" data-term="taistelukunto">TK</span>:</strong> 10</li>
                        <li><strong><span class="glossary-term" data-term="moraali">M</span>:</strong> +5</li>
                        <li><strong><span class="glossary-term" data-term="suoja">S</span>:</strong> 13</li>
                        <li><strong><span class="glossary-term" data-term="liike">Liike</span>:</strong> 9 cm</li>
                        <li><strong><span class="glossary-term" data-term="taitotaso">TT</span>:</strong> +5</li>
                        <li><strong>Kyvyt:</strong>
                            <ul>
                                <li><strong>Toimintakyky (1 <span class="glossary-term"
                                            data-term="kp">KP</span>):</strong> Jos yksikkö epäonnistuu Moraalitestissä,
                                    pelaaja voi välittömästi kuluttaa 1 <span class="glossary-term"
                                        data-term="kp">KP</span>:n, jolloin yksikkö läpäisee testin
                                    automaattisesti.</li>
                                <li><strong>Iskuosasto (3 <span class="glossary-term"
                                            data-term="kp">KP</span>):</strong> Yhden vuoron ajan yksikkö saa +2
                                    Hyökkäykseen ja
                                    sen iskut jättävät huomiotta kohteen suojan antaman puolustusbonuksen.</li>
                                <li><strong>Tarkka Isku (Erikoiskyky, 4 <span class="glossary-term"
                                            data-term="kp">KP</span>):</strong> Voi kerran pelissä kutsua kartan
                                    ulkopuolisen tarkan iskun (2d12 vahinkoa, ei hajontaa). Vaatii <span
                                        class="glossary-term" data-term="los">näköyhteyden</span> ja
                                    paikallaan pysymisen.</li>
                            </ul>
                        </li>
                        <li><strong>Varustus:</strong>
                            <ul>
                                <li><strong>Erikoisjoukkojen rynnäkkökivääri:</strong> +5 (Hyökkäys), d8 (Vahinko)</li>
                                <li><strong>Raskas tarkkuuskivääri:</strong> +6 (Hyökkäys), d12 (Vahinko). Osuessaan
                                    hyökkääjä voi valita kohteen aktiivisen erikoiskyvyn pois käytöstä yhden vuoron
                                    ajaksi.</li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div id="unit-komppanianpäällikkö">
            <div class="unit-card">
                <h4>KOMPPANIANPÄÄLLIKKÖ (<span class="glossary-term" data-term="kp">KP</span>)</h4>
                <div class="unit-card-content">
                    <ul>
                        <li><strong>Tyyppi:</strong> Komentoryhmä (3-5 sotilasta)</li>
                        <li><strong><span class="glossary-term" data-term="taistelukunto">TK</span>:</strong> 8</li>
                        <li><strong><span class="glossary-term" data-term="moraali">M</span>:</strong> +5</li>
                        <li><strong><span class="glossary-term" data-term="suoja">S</span>:</strong> 10</li>
                        <li><strong><span class="glossary-term" data-term="liike">Liike</span>:</strong> 5 cm</li>
                        <li><strong><span class="glossary-term" data-term="taitotaso">TT</span>:</strong> +4</li>
                        <li>
                            <strong>Kyvyt:</strong>
                            <ul>
                                <li><strong>Komentajan Aura:</strong> Kaikki ystävälliset yksiköt 60 cm säteellä, jotka
                                    ovat <span class="glossary-term" data-term="komentoyhteys">komentoyhteydessä</span>,
                                    saavat +1 bonuksen kaikkiin <span class="glossary-term"
                                        data-term="moraali">Moraalitesteihin</span>. Tämä kyky ei
                                    ole kasautuva muiden vastaavien aurien kanssa.</li>
                                <li><strong>Tilannekuva:</strong> Päälliköllä on aina pääsy laajempaan tilannekuvaan.
                                    Kerran pelissä hän voi tehdä <span class="glossary-term"
                                        data-term="taitotaso">TT</span>-testin (<span class="glossary-term"
                                        data-term="dc">DC</span> 14). Onnistuessaan hän voi poistaa yhden
                                    "?"-merkin kartalta ja paljastaa yksikön tyypin (mutta ei tarkkaa sijaintia).</li>
                                <li><strong>Johtaa edestä <span
                                            class="vaurioitunut-tila">(Vaurioitunut)</span>:</strong> Jos päällikön
                                    yksikkö on "Vaurioitunut", Komentajan Aura -kyvyn bonus putoaa arvoon +0 ja hän ei
                                    voi enää käyttää Tilannekuva-kykyä. Komentopistetuotanto ja -siirto toimivat
                                    kuitenkin normaalisti.</li>
                            </ul>
                        </li>
                        <li>
                            <strong>Varustus:</strong>
                            <ul>
                                <li><strong>Henkilökohtainen aseistus:</strong> +1 (Hyökkäys), d4 (Vahinko). Tämä
                                    yksikkö ei ole tarkoitettu etulinjan taisteluun.</li>
                                <li><strong>Tehokas viestivälineistö:</strong> Mahdollistaa Komentoyhteyden ja
                                    <span class="glossary-term" data-term="kp">Komentopisteiden</span> siirron
                                    alaisille.
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div id="scroll-buttons-container" class="scroll-buttons">

        <div id="scroll-legend" class="scroll-legend-panel">
            <p class="font-bold mb-2">Nappien selitteet:</p>
            <ul>
                <li><img src="images/Kersantti_hihalaatta.svg.png" alt="Kersantti" class="legend-icon"> Sivun alkuun /
                    Loppuun</li>
                <li><img src="images/Alikersantti_hihalaatta.svg.png" alt="Alikersantti" class="legend-icon"> Edellinen
                    / Seuraava pääotsikko (H2)</li>
                <li><img src="images/Korpraali_hihalaatta.svg.png" alt="Korpraali" class="legend-icon"> Edellinen /
                    Seuraava otsikko (H2/H3)</li>
            </ul>
        </div>

        <div class="scroll-row">
            <button id="scroll-info-toggle" title="Näytä ohjeet" class="scroll-button info-button">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                    stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z" />
                </svg>
            </button>
        </div>

        <div class="scroll-row">
            <div class="scroll-column">
                <button id="scroll-top" title="Sivun alkuun (Kersantti)" class="scroll-button">
                    <img src="images/Kersantti_hihalaatta.svg.png" alt="Sivun alkuun">
                </button>
                <button id="scroll-h2-up" title="Edellinen pääotsikko (Alikersantti)" class="scroll-button">
                    <img src="images/Alikersantti_hihalaatta.svg.png" alt="Edellinen pääotsikko">
                </button>
                <button id="scroll-h3-up" title="Edellinen otsikko (Korpraali)" class="scroll-button">
                    <img src="images/Korpraali_hihalaatta.svg.png" alt="Edellinen otsikko">
                </button>
            </div>
            <div class="scroll-column">
                <button id="scroll-bottom" title="Sivun loppuun (Kersantti)" class="scroll-button">
                    <img src="images/Kersantti_hihalaatta.svg.png" alt="Sivun loppuun" class="invert-icon">
                </button>
                <button id="scroll-h2-down" title="Seuraava pääotsikko (Alikersantti)" class="scroll-button">
                    <img src="images/Alikersantti_hihalaatta.svg.png" alt="Seuraava pääotsikko" class="invert-icon">
                </button>
                <button id="scroll-h3-down" title="Seuraava otsikko (Korpraali)" class="scroll-button">
                    <img src="images/Korpraali_hihalaatta.svg.png" alt="Seuraava otsikko" class="invert-icon">
                </button>
            </div>
        </div>
    </div>

    <script src="Scripts/rules.js"></script>
    <script src="Scripts/glossaryData.js"></script>
    <script src="Scripts/popup.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {

            // ====================================================================
            // OSA 1: YKSIKKÖSUODATIN
            // ====================================================================
            const blueUnitData = {
                'unit-jaakariryhma': 'Jääkäriryhmä',
                'unit-tukiryhma': 'Tukiryhmä (KK)',
                'unit-pst-ryhma': 'PST-ryhmä',
                'unit-krh-ryhma': 'Krh-ryhmä (81mm)',
                'unit-sissi-jaakarit': 'Sissi-Jääkärit',
                'unit-erikoisjaakari-osasto': 'Erikoisjääkäri-osasto',
                'unit-komppanianpäällikkö': 'Komppanianpäällikkö'
            };

            const blueCheckboxContainer = document.getElementById('blue-unit-checkboxes');
            const displayArea = document.getElementById('unit-display-area');
            const allUnitDataContainer = document.getElementById('all-unit-data');
            const filterContainer = document.getElementById('yksikkosuodatin');

            function createCheckboxes(container, data) {
                if (!container) return;
                for (const id in data) {
                    const label = document.createElement('label');
                    label.className = 'unit-checkbox-label';
                    const checkbox = document.createElement('input');
                    checkbox.type = 'checkbox';
                    checkbox.value = id;
                    checkbox.className = 'unit-checkbox';
                    const span = document.createElement('span');
                    span.textContent = data[id];
                    label.appendChild(checkbox);
                    label.appendChild(span);
                    container.appendChild(label);
                }
            }
            createCheckboxes(blueCheckboxContainer, blueUnitData);

            function updateDisplayedUnits() {
                if (!displayArea || !allUnitDataContainer) return;
                displayArea.innerHTML = '';
                const selectedCheckboxes = filterContainer.querySelectorAll('.unit-checkbox:checked');
                if (selectedCheckboxes.length > 0) {
                    selectedCheckboxes.forEach(checkbox => {
                        const unitId = checkbox.value;
                        const unitElement = allUnitDataContainer.querySelector('#' + unitId);
                        if (unitElement) {
                            displayArea.appendChild(unitElement.cloneNode(true));
                        }
                    });
                }
            }

            if (filterContainer) {
                filterContainer.addEventListener('change', function (event) {
                    if (event.target.classList.contains('unit-checkbox')) {
                        updateDisplayedUnits();
                    }
                });
            }

            // ====================================================================
            // OSA 2: ETÄISYYSMUUNNIN
            // ====================================================================
            const calculateDistanceBtn = document.getElementById('calculate-distance');
            if (calculateDistanceBtn) {
                calculateDistanceBtn.addEventListener('click', function () {
                    const inputCm = document.getElementById('distance-input').value;
                    const outputDiv = document.getElementById('distance-output');
                    if (inputCm && !isNaN(inputCm)) {
                        const distanceMeters = inputCm * 100;
                        let resultText = inputCm + " cm = " + distanceMeters + " metriä. <br>Tällä etäisyydellä tehokkaita aseita ovat:<ul>";
                        if (distanceMeters <= 500) resultText += "<li>Kaikki jalkaväkiaseet</li>";
                        if (distanceMeters <= 1000) resultText += "<li>Konekiväärit ja Tarkkuuskiväärit</li>";
                        if (distanceMeters <= 1500) resultText += "<li>Panssarintorjunta-aseet (<span class='glossary-term' data-term='pst'>PST</span>)</li>";
                        if (distanceMeters <= 3000) resultText += "<li><span class='glossary-term' data-term='orgaaninen tulituki'>Orgaaninen tulituki</span> (<span class='glossary-term' data-term='krh'>KRH</span> 81mm)</li>";
                        if (distanceMeters > 3000) resultText += "<li><span class='glossary-term' data-term='epäorgaaninen tulituki'>Epäorgaaninen tulituki</span> (esim. 155mm tykistö)</li>";
                        resultText += "</ul>";
                        outputDiv.innerHTML = resultText;
                    } else {
                        outputDiv.textContent = "Syötä kelvollinen numero.";
                    }
                });
            }

            // ====================================================================
            // OSA 3: LIIKKUMISEN KUSTANNUSLASKURI
            // ====================================================================
            const calculateLiikeBtn = document.getElementById('calculate-liike');
            if (calculateLiikeBtn) {
                calculateLiikeBtn.addEventListener('click', function () {
                    // KORJATUT RIVIT: Poistettu <span>-tagit getElementById-kutsuista
                    const liikeArvo = parseFloat(document.getElementById('liike-arvo').value) || 0;
                    const matkaTie = parseFloat(document.getElementById('matka-tie').value) || 0;
                    const matkaPelto = parseFloat(document.getElementById('matka-pelto').value) || 0;
                    const matkaMetsa = parseFloat(document.getElementById('matka-metsa').value) || 0;
                    const matkaTiheaMetsa = parseFloat(document.getElementById('matka-tihea-metsa').value) || 0;
                    const outputDiv = document.getElementById('liike-output');

                    if (liikeArvo <= 0) {
                        outputDiv.innerHTML = "Syötä yksikön Liike-arvo (suurempi kuin 0).";
                        return;
                    }

                    const kustannus = { tie: 0.5, pelto: 1, metsa: 2, tiheaMetsa: 3 };
                    const totalCost = (matkaTie * kustannus.tie) + (matkaPelto * kustannus.pelto) + (matkaMetsa * kustannus.metsa) + (matkaTiheaMetsa * kustannus.tiheaMetsa);
                    const remainingMovement = liikeArvo - totalCost;
                    let resultHTML = `Suunnitellun reitin kokonaiskustannus: <strong>${totalCost.toFixed(1)}</strong> liikkumispistettä.<br>`;

                    if (remainingMovement >= 0) {
                        resultHTML += `<span style="color: green;">Liike onnistuu.</span> Liikkumispotentiaalia jää jäljelle: <strong>${remainingMovement.toFixed(1)}</strong>.`;
                    } else {
                        resultHTML += `<span style="color: red;">Liike ei onnistu.</span> Ylität liikkumispotentiaalisi <strong>${Math.abs(remainingMovement).toFixed(1)}</strong> pisteellä.`;
                    }
                    outputDiv.innerHTML = resultHTML;
                });
            }
        });
    </script>
</body>

</html>